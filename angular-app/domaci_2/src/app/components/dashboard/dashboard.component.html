<div class="dashboard-container">
    <h2>Your Accounts</h2>
    <div class="account-list">
        <div *ngFor="let account of accounts" class="account-card">
            <h3>{{ account.account_name }}</h3>
            <p>Balance: ${{ account.balance | currencyFormat }}</p>
            <app-button variant="secondary" (onClick)="viewDetails(account.id)">View Transactions</app-button>
        </div>
    </div>

    <div class="calculator">
  <h3>Štedni kalkulator</h3>
  <form (ngSubmit)="calculateSavings()" #savingsForm="ngForm" class="calculator-form">
    <label>Početni iznos (RSD):</label>
    <input type="number" [(ngModel)]="initialAmount" name="initialAmount" required />

    <label>Mesečna štednja (RSD):</label>
    <input type="number" [(ngModel)]="monthlyContribution" name="monthlyContribution" required />

    <label>Broj meseci:</label>
    <input type="number" [(ngModel)]="months" name="months" required />

    <label>Godišnja kamata (%):</label>
    <input type="number" [(ngModel)]="interestRate" name="interestRate" />

    <label>Prikaži u valuti:</label>
    <select [(ngModel)]="selectedCurrency" name="selectedCurrency">
      <option value="EUR">EUR</option>
      <option value="USD">USD</option>
      <option value="CHF">CHF</option>
    </select>

    <button type="submit">Izračunaj</button>
  </form>

  <div *ngIf="savingsTotal !== null">
    <strong>Ukupna štednja u RSD:</strong>
    <p style="font-size: 18px; color: #2E7D32;">
      {{ savingsTotal | number:'1.2-2' }} RSD
    </p>
  </div>

  <div *ngIf="convertedCurrency !== null">
    <strong>U {{ selectedCurrency }}:</strong>
    <p style="font-size: 18px; color: #1565C0;">
      {{ convertedCurrency | number:'1.2-2' }} {{ selectedCurrency }}
    </p>
  </div>
</div>


    <div class="charts-container">
        <div class="chart-card">
            <h3>Spending by Category</h3>
            <canvas baseChart [data]="pieChartData" [type]="'pie'" [options]="pieChartOptions">
            </canvas>
        </div>
        <div class="chart-card">
            <h3>Monthly Spending</h3>
            <canvas baseChart [data]="barChartData" [type]="'bar'" [options]="barChartOptions">
            </canvas>
        </div>
    </div>

    <div class="activity-feed">
        <h3>Recent Transactions</h3>
        <ul>
            <li *ngFor="let tx of recentTransactions">
                <strong>{{ tx.category.name }}</strong>: {{ tx.amount | currencyFormat }} — {{ tx.transaction_date |
                date:'MMM d, y' }}
            </li>
        </ul>
    </div>
</div>